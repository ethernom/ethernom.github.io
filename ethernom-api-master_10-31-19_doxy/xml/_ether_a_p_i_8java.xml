<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.14">
  <compounddef id="_ether_a_p_i_8java" kind="file" language="Java">
    <compoundname>EtherAPI.java</compoundname>
    <innerclass refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i" prot="public">com::ethernom::android::etherapi::EtherAPI</innerclass>
    <innernamespace refid="namespacecom_1_1ethernom_1_1android_1_1etherapi">com::ethernom::android::etherapi</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="keyword">package<sp/></highlight><highlight class="normal">com.ethernom.android.etherapi;</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>android.content.Context;</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>android.se.omapi.SEService;</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>android.util.Log;</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/><ref refid="namespacecom" kindref="compound">com</ref>.<ref refid="namespacecom_1_1ethernom" kindref="compound">ethernom</ref>.<ref refid="namespacecom_1_1ethernom_1_1android" kindref="compound">android</ref>.<ref refid="namespacecom_1_1ethernom_1_1android_1_1etherapi" kindref="compound">etherapi</ref>.<ref refid="namespacecom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer" kindref="compound">linkLayer</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_card_event_listener" kindref="compound">CardEventListener</ref>;</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/><ref refid="namespacecom" kindref="compound">com</ref>.<ref refid="namespacecom_1_1ethernom" kindref="compound">ethernom</ref>.<ref refid="namespacecom_1_1ethernom_1_1android" kindref="compound">android</ref>.<ref refid="namespacecom_1_1ethernom_1_1android_1_1etherapi" kindref="compound">etherapi</ref>.<ref refid="namespacecom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer" kindref="compound">linkLayer</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_b_t_adapter" kindref="compound">EtherBTAdapter</ref>;</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/><ref refid="namespacecom" kindref="compound">com</ref>.<ref refid="namespacecom_1_1ethernom" kindref="compound">ethernom</ref>.<ref refid="namespacecom_1_1ethernom_1_1android" kindref="compound">android</ref>.<ref refid="namespacecom_1_1ethernom_1_1android_1_1etherapi" kindref="compound">etherapi</ref>.<ref refid="namespacecom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer" kindref="compound">linkLayer</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter" kindref="compound">EtherCommAdapter</ref>;</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="namespacecom" kindref="compound">com</ref>.<ref refid="namespacecom_1_1ethernom" kindref="compound">ethernom</ref>.<ref refid="namespacecom_1_1ethernom_1_1android" kindref="compound">android</ref>.<ref refid="namespacecom_1_1ethernom_1_1android_1_1etherapi" kindref="compound">etherapi</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_error" kindref="compound">EtherError</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_error_1ab3db2fe3eaf8489812e1a24f60b8bed5" kindref="member">ERR_ETH_DISCONNECTED</ref>;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="namespacecom" kindref="compound">com</ref>.<ref refid="namespacecom_1_1ethernom" kindref="compound">ethernom</ref>.<ref refid="namespacecom_1_1ethernom_1_1android" kindref="compound">android</ref>.<ref refid="namespacecom_1_1ethernom_1_1android_1_1etherapi" kindref="compound">etherapi</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_error" kindref="compound">EtherError</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_error_1a613242d9be750d1261140b531b3e7be1" kindref="member">ERR_ETH_SELECT_FAILED</ref>;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i" kindref="compound">EtherAPI</ref><sp/>{</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a88a61879042281174ee0a959e69be645" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>String<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a88a61879042281174ee0a959e69be645" kindref="member">TAG</ref>=<sp/></highlight><highlight class="stringliteral">&quot;EtherAPI&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="17" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ec445aeb00f2279e790f0095a891184" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ec445aeb00f2279e790f0095a891184" kindref="member">instanceCount</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>these<sp/>listeners<sp/>provide<sp/>app<sp/>level<sp/>callbacks<sp/>for<sp/>app<sp/>developers<sp/>to<sp/>use</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>they<sp/>are<sp/>callbacks<sp/>with<sp/>respect<sp/>to<sp/>full<sp/>Transport<sp/>layer<sp/>messages<sp/>to<sp/>and<sp/>from<sp/>the<sp/>AO</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter" kindref="compound">EtherCommAdapter</ref><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>;</highlight></codeline>
<codeline lineno="23" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a113571675a5e5609c38406b367dd28d5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>Context<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a113571675a5e5609c38406b367dd28d5" kindref="member">_thisContext</ref>;</highlight></codeline>
<codeline lineno="24" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol" kindref="compound">EtherTransportProtocol</ref><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="25" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1aa6f9befe15c863aac9e90acb9b0ab387" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>byte<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1aa6f9befe15c863aac9e90acb9b0ab387" kindref="member">openServiceCmd</ref><sp/>=<sp/>(byte)<sp/>-1;</highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1accc3f965344597c47dfc72a8df5e8fe3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_select_listener" kindref="compound">SelectListener</ref><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1accc3f965344597c47dfc72a8df5e8fe3" kindref="member">_selectListener</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="28" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ac56cb305d48a76b7b286838a54fa07b5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_read_listener" kindref="compound">ReadListener</ref><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ac56cb305d48a76b7b286838a54fa07b5" kindref="member">_readListener</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="29" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1998f4cdc36ec1700e910018cae401ad" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_discover_service_listener" kindref="compound">DiscoverServiceListener</ref><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1998f4cdc36ec1700e910018cae401ad" kindref="member">_discoverServiceListener</ref>;</highlight></codeline>
<codeline lineno="30" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1b0348df6d6a3e23e1bae204e18d5dc1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_card_close_listener" kindref="compound">CardCloseListener</ref><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1b0348df6d6a3e23e1bae204e18d5dc1" kindref="member">_cardClosedListener</ref>;</highlight></codeline>
<codeline lineno="31" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ef177f46e8bf77977dfb017591e66db" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_un_solicited_event_listener" kindref="compound">UnSolicitedEventListener</ref><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ef177f46e8bf77977dfb017591e66db" kindref="member">_unSolicitedEventListener</ref>;</highlight></codeline>
<codeline lineno="32" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ab62c134bcd6f59dbf43f1039134995cc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_connection_event_listener" kindref="compound">ConnectionEventListener</ref><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ab62c134bcd6f59dbf43f1039134995cc" kindref="member">_connectionEventListener</ref>;</highlight></codeline>
<codeline lineno="33" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1aebc393c58cd578de76684a2ec0c45038" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1aebc393c58cd578de76684a2ec0c45038" kindref="member">_scanSecsTimeout</ref>;</highlight></codeline>
<codeline lineno="34" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ae2263ea5984b31836d41847b7d8ddca6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ae2263ea5984b31836d41847b7d8ddca6" kindref="member">_scanAllowDuplicates</ref>;</highlight></codeline>
<codeline lineno="35" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ad6d683fc0000af5cf4ab181110f5a270" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ad6d683fc0000af5cf4ab181110f5a270" kindref="member">_scanStopScanOnWrite</ref>;</highlight></codeline>
<codeline lineno="36" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a4eb73235f8638afdb798f4351a885951" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a4eb73235f8638afdb798f4351a885951" kindref="member">thisId</ref>;</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>CARD<sp/>EVENTS,<sp/>these<sp/>are<sp/>coming<sp/>from<sp/>the<sp/>layer<sp/>BELOW<sp/>the<sp/>API<sp/>not<sp/>to<sp/>be<sp/>confused<sp/>with<sp/>Events</highlight></codeline>
<codeline lineno="38"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>we<sp/>sent<sp/>to<sp/>the<sp/>app<sp/>via<sp/>the<sp/>api.<sp/><sp/>We<sp/>accept<sp/>events<sp/>from<sp/>the<sp/>card<sp/>here<sp/>and<sp/>transform<sp/>them<sp/>to</highlight></codeline>
<codeline lineno="39"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>events<sp/>to<sp/>the<sp/>app</highlight></codeline>
<codeline lineno="40"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a9785ed6dbf7ce2f95bc22f8aa9908392" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a9785ed6dbf7ce2f95bc22f8aa9908392" kindref="member">SetupCardListeners</ref>(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter" kindref="compound">EtherCommAdapter</ref><sp/>adapter){</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1a57af184b11f4ccd518e6abcea71438fd" kindref="member">SetDiscoverServiceEventListener</ref>(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_discover_service_listener" kindref="compound">DiscoverServiceListener</ref>()<sp/>{</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onServiceDiscover(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode,<sp/>String<sp/>deviceID,<sp/>String<sp/>deviceName)<sp/>{</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1998f4cdc36ec1700e910018cae401ad" kindref="member">_discoverServiceListener</ref><sp/>!=<sp/>null)</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1998f4cdc36ec1700e910018cae401ad" kindref="member">_discoverServiceListener</ref>.<ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_discover_service_listener_1af4153d6e21ddccb41644a042c448e400" kindref="member">onServiceDiscover</ref>(resultCode,deviceID,<sp/>deviceName);</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onServiceDiscoverFail(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>hwSpecificError)<sp/>{</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onServiceDiscoverEnd(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode)<sp/>{</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1998f4cdc36ec1700e910018cae401ad" kindref="member">_discoverServiceListener</ref><sp/>!=<sp/>null)</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1998f4cdc36ec1700e910018cae401ad" kindref="member">_discoverServiceListener</ref>.<ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_discover_service_listener_1af4153d6e21ddccb41644a042c448e400" kindref="member">onServiceDiscover</ref>(resultCode,</highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>});</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1a1f7f6961c42491f67d7fd9e7c187340c" kindref="member">SetCardEventListener</ref>(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_card_event_listener" kindref="compound">CardEventListener</ref>()<sp/>{</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onCardOpenFail(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>hwSpecificError)<sp/>{</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1accc3f965344597c47dfc72a8df5e8fe3" kindref="member">_selectListener</ref><sp/>!=<sp/>null)</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1accc3f965344597c47dfc72a8df5e8fe3" kindref="member">_selectListener</ref>.<ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_select_listener_1a7ecaa3bf4d2d13db58fe1a027e2340e6" kindref="member">onSelectFail</ref>(ERR_ETH_SELECT_FAILED,<sp/>resultCode);</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//public<sp/>void<sp/>onCardConnectionDropped(int<sp/>resultCode);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onCardConnectionDropped(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode)<sp/>{</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ab62c134bcd6f59dbf43f1039134995cc" kindref="member">_connectionEventListener</ref><sp/>!=<sp/>null)</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ab62c134bcd6f59dbf43f1039134995cc" kindref="member">_connectionEventListener</ref>.<ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_connection_event_listener_1acc0b5837e4cf7a81b6a3fb958be88067" kindref="member">onConnectionDropped</ref>(resultCode);</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onCardOpenSuccess(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode)<sp/>{</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>card<sp/>was<sp/>opened</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>inform<sp/>the<sp/>app<sp/>side</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1accc3f965344597c47dfc72a8df5e8fe3" kindref="member">_selectListener</ref><sp/>!=<sp/>null)</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1accc3f965344597c47dfc72a8df5e8fe3" kindref="member">_selectListener</ref>.<ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_select_listener_1a890afbd52a51aeb70f6859d8ed26a325" kindref="member">onSelectSuccess</ref>(resultCode);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onCardClosedByCard(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode)<sp/>{</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1accc3f965344597c47dfc72a8df5e8fe3" kindref="member">_selectListener</ref><sp/>!=<sp/>null)</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1accc3f965344597c47dfc72a8df5e8fe3" kindref="member">_selectListener</ref>.<ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_select_listener_1a79bddd3d84d6e92505d5f22b1567e403" kindref="member">onDisconnect</ref>(ERR_ETH_DISCONNECTED,<sp/>resultCode);</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onCardClosedFail(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>hwSpecificError)<sp/>{</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onCardClosedSucess(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode)<sp/>{</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1b0348df6d6a3e23e1bae204e18d5dc1" kindref="member">_cardClosedListener</ref><sp/>!=<sp/>null)</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1b0348df6d6a3e23e1bae204e18d5dc1" kindref="member">_cardClosedListener</ref>.<ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_card_close_listener_1a6fff42211bd62d755d223e49e509ec63" kindref="member">onCardCloseSuccess</ref>(resultCode);</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onReadFromCardFail(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>hwSpecificError)<sp/>{</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onReadFromCardSuccess(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode,<sp/>byte[]<sp/>buffer)<sp/>{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we<sp/>are<sp/>coming<sp/>in<sp/>here<sp/>with<sp/>in<sp/>theory<sp/>a<sp/>full<sp/>transport<sp/>layer<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a88a61879042281174ee0a959e69be645" kindref="member">TAG</ref>,<sp/></highlight><highlight class="stringliteral">&quot;read<sp/>from<sp/>card<sp/>success&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>in<sp/>the<sp/>old<sp/>code<sp/>we<sp/>check<sp/><sp/>buffer[1]<sp/>for<sp/>this<sp/>also</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(buffer[0]<sp/>==<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1ae590c234c12d110212fd75595235a132" kindref="member">GetServicePort</ref>())<sp/>{</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>read<sp/>agrees<sp/>with<sp/>current<sp/>services</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(buffer.length<sp/>&gt;<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol" kindref="compound">EtherTransportProtocol</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1a4582a566e69ab602b9c7701a087e20b7" kindref="member">ETH_HEADER_SIZE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>cmd1<sp/>=<sp/>buffer[0];</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>cmd2<sp/>=<sp/>buffer[1];</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>svcPort<sp/>=<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1ae590c234c12d110212fd75595235a132" kindref="member">GetServicePort</ref>();</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/>protocolError<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cmd1<sp/>!=<sp/>svcPort)</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>protocolError<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>res<sp/>=<sp/>svcPort<sp/>|<sp/>0x80;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>b<sp/>=<sp/>(byte)res;</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cmd2<sp/>!=<sp/>b)</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>protocolError<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>cksum<sp/>=<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1a2689adc9963e71cb1f6814c331c6ffa5" kindref="member">GetTransportMessageCheckSum</ref>(buffer);</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cksum<sp/>!=<sp/>buffer[<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol" kindref="compound">EtherTransportProtocol</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1a4582a566e69ab602b9c7701a087e20b7" kindref="member">ETH_HEADER_SIZE</ref>])</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>protocolError<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>csum<sp/>=<sp/>buffer[<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol" kindref="compound">EtherTransportProtocol</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1a4582a566e69ab602b9c7701a087e20b7" kindref="member">ETH_HEADER_SIZE</ref>];</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ac56cb305d48a76b7b286838a54fa07b5" kindref="member">_readListener</ref><sp/>!=<sp/>null)<sp/>{</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>only<sp/>deliver<sp/>the<sp/>payload</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte[]<sp/>payload<sp/>=<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1adc5e3627f32f692dec5c6b6037fdfe3e" kindref="member">GetApplicationData</ref>(buffer);</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ac56cb305d48a76b7b286838a54fa07b5" kindref="member">_readListener</ref>.<ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_read_listener_1a404114d62b92d1b844bdbb189711f7e9" kindref="member">onReadSuccess</ref>(resultCode,<sp/>payload);</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ef177f46e8bf77977dfb017591e66db" kindref="member">_unSolicitedEventListener</ref><sp/>!=<sp/>null){</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte[]<sp/>payload<sp/>=<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1adc5e3627f32f692dec5c6b6037fdfe3e" kindref="member">GetApplicationData</ref>(buffer);</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ef177f46e8bf77977dfb017591e66db" kindref="member">_unSolicitedEventListener</ref>.<ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_un_solicited_event_listener_1aab916d0c4a5c3f72975570d591be758f" kindref="member">onUnsolicitedEvent</ref>(resultCode,<sp/>payload);</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onWriteToCardFail(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>hwSpecificError)<sp/>{</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a88a61879042281174ee0a959e69be645" kindref="member">TAG</ref>,<sp/></highlight><highlight class="stringliteral">&quot;write<sp/>to<sp/>card<sp/>failed&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>onWriteToCardSuccess(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>resultCode)<sp/>{</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a88a61879042281174ee0a959e69be645" kindref="member">TAG</ref>,<sp/></highlight><highlight class="stringliteral">&quot;write<sp/>to<sp/>card<sp/>succeeded&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>});</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight></codeline>
<codeline lineno="161" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a728fd002f0533c356fe852b83500b419" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a728fd002f0533c356fe852b83500b419" kindref="member">EtherAPI</ref>(String<sp/>adapterConnectionString,<sp/>byte<sp/>servicePort,<sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>secsTimeout,<sp/></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/>allowDuplicates,<sp/></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/>stopScanOnWrite,<sp/>Context<sp/>context)<sp/>{</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a113571675a5e5609c38406b367dd28d5" kindref="member">_thisContext</ref><sp/>=<sp/>context;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a4eb73235f8638afdb798f4351a885951" kindref="member">thisId</ref><sp/>=<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ec445aeb00f2279e790f0095a891184" kindref="member">instanceCount</ref>++;</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(adapterConnectionString.startsWith((</highlight><highlight class="stringliteral">&quot;BLE&quot;</highlight><highlight class="normal">)))<sp/>{</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_b_t_adapter" kindref="compound">EtherBTAdapter</ref>();</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol" kindref="compound">EtherTransportProtocol</ref>(servicePort,<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1ad6522d7705f367397d96990212ce4811" kindref="member">GetInterface</ref>(),<sp/><ref refid="enumcom_1_1ethernom_1_1android_1_1etherapi_1_1_t_message_protocol" kindref="compound">TMessageProtocol</ref>.<ref refid="enumcom_1_1ethernom_1_1android_1_1etherapi_1_1_t_message_protocol_1ad079375f6ebce0743379ff2411c450aa" kindref="member">APP</ref>);</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1a165ef052bf2b43fd4cfb6d058782dc56" kindref="member">Init</ref>(servicePort,<sp/>secsTimeout,<sp/>allowDuplicates,stopScanOnWrite,<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a113571675a5e5609c38406b367dd28d5" kindref="member">_thisContext</ref>);</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a9785ed6dbf7ce2f95bc22f8aa9908392" kindref="member">SetupCardListeners</ref>(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>);</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(adapterConnectionString.startsWith((</highlight><highlight class="stringliteral">&quot;NFC&quot;</highlight><highlight class="normal">)))<sp/>{</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="175" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5333200b5c0642e16df1fa76148d158c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5333200b5c0642e16df1fa76148d158c" kindref="member">ClearUnsolicitedEventListener</ref>(){</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ef177f46e8bf77977dfb017591e66db" kindref="member">_unSolicitedEventListener</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a8586a32236afdebca0f9730412d9e000" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a8586a32236afdebca0f9730412d9e000" kindref="member">ClearReadListener</ref>(){</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ac56cb305d48a76b7b286838a54fa07b5" kindref="member">_readListener</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a66b7c9e5106572b803046d2f6d6016a4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a66b7c9e5106572b803046d2f6d6016a4" kindref="member">StopDiscovery</ref>(){</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a88a61879042281174ee0a959e69be645" kindref="member">TAG</ref>,<sp/></highlight><highlight class="stringliteral">&quot;STOP<sp/>DISCOVERY:<sp/>&quot;</highlight><highlight class="normal">+<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a4eb73235f8638afdb798f4351a885951" kindref="member">thisId</ref>);</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1acca97182df90976a030684b62c871131" kindref="member">StopDiscovery</ref>();</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="187"><highlight class="normal"></highlight></codeline>
<codeline lineno="188" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a75a0f23761ba90a058d2df1151e06d2b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a75a0f23761ba90a058d2df1151e06d2b" kindref="member">CardClose</ref>(</highlight><highlight class="keyword">final</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_card_close_listener" kindref="compound">CardCloseListener</ref><sp/>closeListener){</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1b0348df6d6a3e23e1bae204e18d5dc1" kindref="member">_cardClosedListener</ref><sp/>=<sp/>closeListener;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1a65686a9a7033d40dfc093189eadb602c" kindref="member">CardClose</ref>();</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1998f4cdc36ec1700e910018cae401ad" kindref="member">_discoverServiceListener</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="193" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1af4bf0cd04217e9ffc746a142deefd261" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1af4bf0cd04217e9ffc746a142deefd261" kindref="member">OnCardDisconnected</ref>(</highlight><highlight class="keyword">final</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_connection_event_listener" kindref="compound">ConnectionEventListener</ref><sp/>connectionEventListener){</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ab62c134bcd6f59dbf43f1039134995cc" kindref="member">_connectionEventListener</ref><sp/>=<sp/>connectionEventListener;</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="196"><highlight class="normal"></highlight></codeline>
<codeline lineno="197" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a730f9d502afbbb8788aada1bf4ae4381" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a730f9d502afbbb8788aada1bf4ae4381" kindref="member">SubscribeToUnsolictedEvents</ref>(</highlight><highlight class="keyword">final</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_un_solicited_event_listener" kindref="compound">UnSolicitedEventListener</ref><sp/>unSolicitedEventListener){</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ac56cb305d48a76b7b286838a54fa07b5" kindref="member">_readListener</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ef177f46e8bf77977dfb017591e66db" kindref="member">_unSolicitedEventListener</ref><sp/>=<sp/>unSolicitedEventListener;</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>secs<sp/>timeout<sp/>of<sp/>-1<sp/>is<sp/>scan<sp/>forever<sp/>or<sp/>until<sp/>process<sp/>is<sp/>killed</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="203" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1af98bcd73ca505716754cfe967a1b65fd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1af98bcd73ca505716754cfe967a1b65fd" kindref="member">DiscoverDevices</ref>(</highlight><highlight class="keyword">final</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_discover_service_listener" kindref="compound">DiscoverServiceListener</ref><sp/>discoverServiceListener){</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a88a61879042281174ee0a959e69be645" kindref="member">TAG</ref>,<sp/></highlight><highlight class="stringliteral">&quot;STOP<sp/>DISCOVERY:<sp/>&quot;</highlight><highlight class="normal">+<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a4eb73235f8638afdb798f4351a885951" kindref="member">thisId</ref>);</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1998f4cdc36ec1700e910018cae401ad" kindref="member">_discoverServiceListener</ref><sp/>=<sp/>discoverServiceListener;</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1a9f7491d2b2afa68da62fafc5d89e360b" kindref="member">Discover</ref>();</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight></codeline>
<codeline lineno="210" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a12e73d4fe631c9817166a1a16ee05949" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a12e73d4fe631c9817166a1a16ee05949" kindref="member">Select</ref>(<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_card_info" kindref="compound">CardInfo</ref><sp/>cardInfo,<sp/></highlight><highlight class="keyword">final</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_select_listener" kindref="compound">SelectListener</ref><sp/>selectListener)<sp/>{</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1accc3f965344597c47dfc72a8df5e8fe3" kindref="member">_selectListener</ref><sp/>=<sp/>selectListener;</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1af0899f88b78f1072650148201cd8bf1d" kindref="member">CardOpen</ref>(cardInfo);</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="214"><highlight class="normal"></highlight></codeline>
<codeline lineno="215" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a00dfeb101d51c8b28b2f11d7bdf5f84c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a00dfeb101d51c8b28b2f11d7bdf5f84c" kindref="member">Write</ref>(byte<sp/>[]<sp/>buffer,<sp/></highlight><highlight class="keyword">final</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_read_listener" kindref="compound">ReadListener</ref><sp/>readListener)<sp/>{</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>a<sp/>Transport<sp/>layer<sp/>packet</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ef177f46e8bf77977dfb017591e66db" kindref="member">_unSolicitedEventListener</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ac56cb305d48a76b7b286838a54fa07b5" kindref="member">_readListener</ref><sp/>=<sp/>readListener;</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte[]<sp/>msg<sp/>=<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1aa7834cb6d0b64e72dc913a5ec1cfcfb8" kindref="member">GetPayload</ref>(buffer);</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1accd54674d191e15ebf08a7c8e7a8d8e9" kindref="member">WriteToCard</ref>(msg);</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="223" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1aa812a2cc15c8b51c541b128b773c864f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1aa812a2cc15c8b51c541b128b773c864f" kindref="member">Write</ref>(byte<sp/>cmd,<sp/></highlight><highlight class="keyword">final</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_read_listener" kindref="compound">ReadListener</ref><sp/>readListener){</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>a<sp/>Transport<sp/>layer<sp/>packet</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ef177f46e8bf77977dfb017591e66db" kindref="member">_unSolicitedEventListener</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ac56cb305d48a76b7b286838a54fa07b5" kindref="member">_readListener</ref><sp/>=<sp/>readListener;</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>[]<sp/>msg<sp/>=<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1aa7834cb6d0b64e72dc913a5ec1cfcfb8" kindref="member">GetPayload</ref>(cmd);</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1accd54674d191e15ebf08a7c8e7a8d8e9" kindref="member">WriteToCard</ref>(msg);</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight></codeline>
<codeline lineno="231" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a404cbb6c5364773e3c97e86192e1762d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a404cbb6c5364773e3c97e86192e1762d" kindref="member">Write</ref>(byte<sp/>cmd,<sp/>byte<sp/>[]<sp/>buffer,<sp/></highlight><highlight class="keyword">final</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_read_listener" kindref="compound">ReadListener</ref><sp/>readListener){</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>a<sp/>Transport<sp/>layer<sp/>packet</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ef177f46e8bf77977dfb017591e66db" kindref="member">_unSolicitedEventListener</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ac56cb305d48a76b7b286838a54fa07b5" kindref="member">_readListener</ref><sp/>=<sp/>readListener;</highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>[]<sp/>msg<sp/>=<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1aa7834cb6d0b64e72dc913a5ec1cfcfb8" kindref="member">GetPayload</ref>(cmd,<sp/>buffer);</highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1accd54674d191e15ebf08a7c8e7a8d8e9" kindref="member">WriteToCard</ref>(msg);</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1abe97e3ee72cd97fb6c210a907e1bfcaa" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1abe97e3ee72cd97fb6c210a907e1bfcaa" kindref="member">Write</ref>(byte<sp/>cmd,<sp/>String<sp/>[]<sp/>buffer,<sp/></highlight><highlight class="keyword">final</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_read_listener" kindref="compound">ReadListener</ref><sp/>readListener){</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>a<sp/>Transport<sp/>layer<sp/>packet</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ef177f46e8bf77977dfb017591e66db" kindref="member">_unSolicitedEventListener</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ac56cb305d48a76b7b286838a54fa07b5" kindref="member">_readListener</ref><sp/>=<sp/>readListener;</highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>[]<sp/>msg<sp/>=<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1aa7834cb6d0b64e72dc913a5ec1cfcfb8" kindref="member">GetPayload</ref>(cmd,<sp/>buffer);</highlight></codeline>
<codeline lineno="247"><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1accd54674d191e15ebf08a7c8e7a8d8e9" kindref="member">WriteToCard</ref>(msg);</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="251" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a397b87cd1ab2b0d151289e39b8b2f16c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a397b87cd1ab2b0d151289e39b8b2f16c" kindref="member">Write</ref>(byte<sp/>cmd,<sp/>String<sp/>buffer,<sp/></highlight><highlight class="keyword">final</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_read_listener" kindref="compound">ReadListener</ref><sp/>readListener){</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>a<sp/>Transport<sp/>layer<sp/>packet</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ef177f46e8bf77977dfb017591e66db" kindref="member">_unSolicitedEventListener</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ac56cb305d48a76b7b286838a54fa07b5" kindref="member">_readListener</ref><sp/>=<sp/>readListener;</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>[]<sp/>msg<sp/>=<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1aa7834cb6d0b64e72dc913a5ec1cfcfb8" kindref="member">GetPayload</ref>(cmd,<sp/>buffer);</highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1accd54674d191e15ebf08a7c8e7a8d8e9" kindref="member">WriteToCard</ref>(msg);</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight></codeline>
<codeline lineno="261" refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a11ed9e46f15a79e2221577a7b1cd68ab" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a11ed9e46f15a79e2221577a7b1cd68ab" kindref="member">Write</ref>(String<sp/>buffer,<sp/></highlight><highlight class="keyword">final</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1ethernom_1_1android_1_1etherapi_1_1_read_listener" kindref="compound">ReadListener</ref><sp/>readListener){</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>a<sp/>Transport<sp/>layer<sp/>packet</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a1ef177f46e8bf77977dfb017591e66db" kindref="member">_unSolicitedEventListener</ref><sp/>=<sp/>null;</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1ac56cb305d48a76b7b286838a54fa07b5" kindref="member">_readListener</ref><sp/>=<sp/>readListener;</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>[]<sp/>msg<sp/>=<sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a5af3360721f7c9fadd6221855fa3f4f8" kindref="member">transport</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_transport_protocol_1aa7834cb6d0b64e72dc913a5ec1cfcfb8" kindref="member">GetPayload</ref>(buffer);</highlight></codeline>
<codeline lineno="267"><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1_ether_a_p_i_1a710ea8ed5f8f9be00337e40222b61c1f" kindref="member">_adapter</ref>.<ref refid="classcom_1_1ethernom_1_1android_1_1etherapi_1_1link_layer_1_1_ether_comm_adapter_1accd54674d191e15ebf08a7c8e7a8d8e9" kindref="member">WriteToCard</ref>(msg);</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="270"><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal">}</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="C:/Lyn/tmp/ethernom-api-master_10-31-19/android/src/main/java/com/ethernom/android/etherapi/EtherAPI.java"/>
  </compounddef>
</doxygen>
